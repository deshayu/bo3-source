#using scripts/codescripts/struct;
#using scripts/shared/ai/zombie_shared;
#using scripts/shared/ai/zombie_utility;
#using scripts/shared/array_shared;
#using scripts/shared/callbacks_shared;
#using scripts/shared/clientfield_shared;
#using scripts/shared/exploder_shared;
#using scripts/shared/flag_shared;
#using scripts/shared/math_shared;
#using scripts/shared/scene_shared;
#using scripts/shared/util_shared;
#using scripts/zm/_zm_devgui;
#using scripts/zm/_zm_equipment;
#using scripts/zm/_zm_net;
#using scripts/zm/_zm_spawner;
#using scripts/zm/_zm_unitrigger;
#using scripts/zm/_zm_utility;
#using scripts/zm/_zm_zonemgr;
#using scripts/zm/craftables/_zm_craftables;
#using scripts/zm/zm_challenges_tomb;
#using scripts/zm/zm_tomb_capture_zones;
#using scripts/zm/zm_tomb_challenges;
#using scripts/zm/zm_tomb_chamber;
#using scripts/zm/zm_tomb_craftables;
#using scripts/zm/zm_tomb_tank;
#using scripts/zm/zm_tomb_teleporter;
#using scripts/zm/zm_tomb_utility;
#using scripts/zm/zm_tomb_vo;

#namespace zm_tomb_utility;

/#

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0x2a9d9605, Offset: 0x9c0
    // Size: 0x894
    function setup_devgui() {
        setdvar("<dev string:x28>", "<dev string:x3a>");
        setdvar("<dev string:x3e>", "<dev string:x3a>");
        setdvar("<dev string:x50>", "<dev string:x3a>");
        setdvar("<dev string:x65>", "<dev string:x3a>");
        setdvar("<dev string:x7e>", "<dev string:x3a>");
        setdvar("<dev string:x8e>", "<dev string:x3a>");
        setdvar("<dev string:x9d>", "<dev string:x3a>");
        setdvar("<dev string:xad>", "<dev string:x3a>");
        setdvar("<dev string:xc4>", "<dev string:x3a>");
        setdvar("<dev string:xdb>", "<dev string:x3a>");
        setdvar("<dev string:xf2>", "<dev string:x3a>");
        setdvar("<dev string:x10a>", "<dev string:x3a>");
        setdvar("<dev string:x122>", "<dev string:x3a>");
        setdvar("<dev string:x13a>", "<dev string:x3a>");
        setdvar("<dev string:x157>", "<dev string:x3a>");
        setdvar("<dev string:x174>", "<dev string:x3a>");
        setdvar("<dev string:x191>", "<dev string:x3a>");
        setdvar("<dev string:x1aa>", "<dev string:x3a>");
        setdvar("<dev string:x1c3>", "<dev string:x3a>");
        setdvar("<dev string:x1dc>", "<dev string:x3a>");
        setdvar("<dev string:x1f0>", "<dev string:x3a>");
        setdvar("<dev string:x204>", "<dev string:x3a>");
        setdvar("<dev string:x218>", "<dev string:x3a>");
        setdvar("<dev string:x22c>", "<dev string:x3a>");
        setdvar("<dev string:x240>", "<dev string:x3a>");
        setdvar("<dev string:x254>", "<dev string:x3a>");
        setdvar("<dev string:x268>", "<dev string:x3a>");
        setdvar("<dev string:x27c>", "<dev string:x3a>");
        setdvar("<dev string:x293>", "<dev string:x2a7>");
        setdvar("<dev string:x2a9>", "<dev string:x2a7>");
        setdvar("<dev string:x2bd>", "<dev string:x2a7>");
        setdvar("<dev string:x2d1>", "<dev string:x2a7>");
        execdevgui("<dev string:x2e9>");
        zm_devgui::add_custom_devgui_callback(&function_eac4a389);
        adddebugcommand("<dev string:x2ff>");
        adddebugcommand("<dev string:x34a>");
        adddebugcommand("<dev string:x395>");
        adddebugcommand("<dev string:x3e0>");
        adddebugcommand("<dev string:x42b>");
        adddebugcommand("<dev string:x476>");
        adddebugcommand("<dev string:x4c1>");
        adddebugcommand("<dev string:x50c>");
        adddebugcommand("<dev string:x557>");
        adddebugcommand("<dev string:x5a2>");
        adddebugcommand("<dev string:x5ed>");
        adddebugcommand("<dev string:x638>");
        adddebugcommand("<dev string:x683>");
        adddebugcommand("<dev string:x6c1>");
        adddebugcommand("<dev string:x70e>");
        adddebugcommand("<dev string:x758>");
        adddebugcommand("<dev string:x7a3>");
        adddebugcommand("<dev string:x7f9>");
        adddebugcommand("<dev string:x83f>");
        adddebugcommand("<dev string:x8a4>");
        adddebugcommand("<dev string:x909>");
        adddebugcommand("<dev string:x96d>");
        adddebugcommand("<dev string:x9d0>");
        adddebugcommand("<dev string:xa39>");
        adddebugcommand("<dev string:xa9c>");
        adddebugcommand("<dev string:xb0a>");
        adddebugcommand("<dev string:xb79>");
        adddebugcommand("<dev string:xbe7>");
        adddebugcommand("<dev string:xc4b>");
        adddebugcommand("<dev string:xcb5>");
        adddebugcommand("<dev string:xd19>");
        adddebugcommand("<dev string:xd62>");
        adddebugcommand("<dev string:xdad>");
        adddebugcommand("<dev string:xdf8>");
        adddebugcommand("<dev string:xe43>");
        adddebugcommand("<dev string:xe8e>");
        adddebugcommand("<dev string:xed9>");
        adddebugcommand("<dev string:xf24>");
        adddebugcommand("<dev string:xf6f>");
        adddebugcommand("<dev string:xfba>");
        level thread function_90960539();
        level thread function_3f2c9a81();
        level thread function_d88b52e6();
        level thread function_4e88f38d();
        level thread function_6f935c89();
        level thread function_23eb2509();
    }

    // Namespace zm_tomb_utility
    // Params 1, eflags: 0x0
    // Checksum 0x4a7558ab, Offset: 0x1260
    // Size: 0x14a
    function function_eac4a389(cmd) {
        var_98be8724 = strtok(cmd, "<dev string:x100f>");
        switch (var_98be8724[0]) {
        case "<dev string:x1011>":
            level notify(#"force_recapture_start");
            break;
        case "<dev string:x1027>":
        case "<dev string:x103c>":
        case "<dev string:x1051>":
        case "<dev string:x1066>":
        case "<dev string:x107b>":
        case "<dev string:x1090>":
            level notify(#"hash_bbcb5d8c", int(getsubstr(var_98be8724[0], 19)));
            break;
        case "<dev string:x10a5>":
        case "<dev string:x10bc>":
        case "<dev string:x10d3>":
        case "<dev string:x10ea>":
        case "<dev string:x1101>":
        case "<dev string:x1118>":
            level notify(#"hash_d9f2eac9", int(getsubstr(var_98be8724[0], 21)));
            break;
        }
    }

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0xcf051245, Offset: 0x13b8
    // Size: 0x138
    function function_23eb2509() {
        while (true) {
            if (getdvarstring("<dev string:x293>") != "<dev string:x2a7>") {
                n_zone = int(getdvarstring("<dev string:x293>"));
                level notify(#"hash_bbcb5d8c", n_zone);
                setdvar("<dev string:x293>", "<dev string:x2a7>");
            }
            if (getdvarstring("<dev string:x2a9>") != "<dev string:x2a7>") {
                n_zone = int(getdvarstring("<dev string:x2a9>"));
                level notify(#"hash_d9f2eac9", n_zone);
                setdvar("<dev string:x2a9>", "<dev string:x2a7>");
            }
            wait 0.5;
        }
    }

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0x4a3631ca, Offset: 0x14f8
    // Size: 0x78
    function function_6f935c89() {
        while (true) {
            if (getdvarstring("<dev string:x9d>") == "<dev string:x112f>") {
                zm_tomb_capture_zones::function_b0debead();
                setdvar("<dev string:x9d>", "<dev string:x3a>");
            }
            wait 0.5;
        }
    }

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0xabe7d99b, Offset: 0x1578
    // Size: 0x1b6
    function function_4e88f38d() {
        cmd = "<dev string:x1132>";
        while (true) {
            wait 0.25;
            if (!isdefined(level.zombie_devgui_gun) || level.zombie_devgui_gun != cmd) {
                a_players = getplayers();
                foreach (player in a_players) {
                    var_ec030825 = 0;
                    a_w_weapons = player getweaponslist();
                    foreach (w_weapon in a_w_weapons) {
                        if (function_9441e538(w_weapon)) {
                            var_ec030825 = 1;
                        }
                    }
                    if (var_ec030825) {
                        player function_84442246();
                    }
                }
            }
        }
    }

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0xec0c90ca, Offset: 0x1738
    // Size: 0xcb8
    function function_d88b52e6() {
        while (true) {
            if (getdvarstring("<dev string:x1dc>") == "<dev string:x112f>" || getdvarstring("<dev string:x1f0>") == "<dev string:x112f>" || getdvarstring("<dev string:x204>") == "<dev string:x112f>" || getdvarstring("<dev string:x218>") == "<dev string:x112f>" || getdvarstring("<dev string:x22c>") == "<dev string:x112f>" || getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1133>");
                level flag::set("<dev string:x1149>");
            }
            if (getdvarstring("<dev string:x1dc>") == "<dev string:x112f>") {
                setdvar("<dev string:x1dc>", "<dev string:x3a>");
                iprintlnbold("<dev string:x115c>");
            }
            if (getdvarstring("<dev string:x1f0>") == "<dev string:x112f>" || getdvarstring("<dev string:x204>") == "<dev string:x112f>" || getdvarstring("<dev string:x218>") == "<dev string:x112f>" || getdvarstring("<dev string:x22c>") == "<dev string:x112f>" || getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1177>");
                level waittill(#"hash_e0898539");
                level waittill(#"hash_e6967d42");
            }
            if (getdvarstring("<dev string:x1f0>") == "<dev string:x112f>") {
                setdvar("<dev string:x1f0>", "<dev string:x3a>");
                iprintlnbold("<dev string:x118e>");
            }
            if (getdvarstring("<dev string:x204>") == "<dev string:x112f>" || getdvarstring("<dev string:x218>") == "<dev string:x112f>" || getdvarstring("<dev string:x22c>") == "<dev string:x112f>" || getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x11a9>");
                level waittill(#"hash_dc144054");
                level waittill(#"hash_4c5352e3");
            }
            if (getdvarstring("<dev string:x204>") == "<dev string:x112f>") {
                setdvar("<dev string:x204>", "<dev string:x3a>");
                iprintlnbold("<dev string:x11be>");
            }
            if (getdvarstring("<dev string:x218>") == "<dev string:x112f>" || getdvarstring("<dev string:x22c>") == "<dev string:x112f>" || getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x11d9>");
                var_5e72b36d = getent("<dev string:x11f4>", "<dev string:x120c>");
                if (isdefined(var_5e72b36d)) {
                    var_5e72b36d delete();
                }
                var_54571dd0 = getent("<dev string:x1217>", "<dev string:x120c>");
                if (isdefined(var_54571dd0)) {
                    var_54571dd0 delete();
                }
                level waittill(#"hash_972e03ef");
                level waittill(#"hash_7bcf8600");
            }
            if (getdvarstring("<dev string:x218>") == "<dev string:x112f>") {
                setdvar("<dev string:x218>", "<dev string:x3a>");
                iprintlnbold("<dev string:x1228>");
            }
            if (getdvarstring("<dev string:x22c>") == "<dev string:x112f>" || getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1243>");
                level flag::set("<dev string:x1259>");
                level waittill(#"hash_f397975a");
                level waittill(#"hash_4f3f0441");
            }
            if (getdvarstring("<dev string:x22c>") == "<dev string:x112f>") {
                setdvar("<dev string:x22c>", "<dev string:x3a>");
                iprintlnbold("<dev string:x1278>");
            }
            if (getdvarstring("<dev string:x240>") == "<dev string:x112f>" || getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1293>");
                level waittill(#"hash_5fff9bfd");
                level waittill(#"hash_8b0d379e");
            }
            if (getdvarstring("<dev string:x240>") == "<dev string:x112f>") {
                setdvar("<dev string:x240>", "<dev string:x3a>");
                iprintlnbold("<dev string:x12ac>");
            }
            if (getdvarstring("<dev string:x254>") == "<dev string:x112f>" || getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x12c7>");
                level waittill(#"hash_9130e1d8");
                level waittill(#"hash_ee01811f");
            }
            if (getdvarstring("<dev string:x254>") == "<dev string:x112f>") {
                setdvar("<dev string:x254>", "<dev string:x3a>");
                iprintlnbold("<dev string:x12e5>");
            }
            if (getdvarstring("<dev string:x268>") == "<dev string:x112f>" || getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1300>");
                level waittill(#"hash_26f53c83");
                level waittill(#"hash_7f00c03c");
            }
            if (getdvarstring("<dev string:x268>") == "<dev string:x112f>") {
                setdvar("<dev string:x268>", "<dev string:x3a>");
                iprintlnbold("<dev string:x1312>");
            }
            if (getdvarstring("<dev string:x27c>") == "<dev string:x112f>") {
                level flag::set("<dev string:x132d>");
                level waittill(#"hash_738ebd3d");
                setdvar("<dev string:x27c>", "<dev string:x3a>");
            }
            wait 0.5;
        }
    }

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0xf65521e3, Offset: 0x23f8
    // Size: 0xa18
    function function_3f2c9a81() {
        while (true) {
            if (getdvarstring("<dev string:x28>") == "<dev string:x112f>" || getdvarstring("<dev string:x3e>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1342>");
                level flag::set("<dev string:x1358>");
                level flag::set("<dev string:x136e>");
                level flag::set("<dev string:x1389>");
                level flag::set("<dev string:x13a0>");
                setdvar("<dev string:x28>", "<dev string:x3a>");
                level notify(#"open_all_gramophone_doors");
            }
            if (getdvarstring("<dev string:x7e>") == "<dev string:x112f>") {
                level flag::set("<dev string:x7e>");
                setdvar("<dev string:x7e>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x3e>") == "<dev string:x112f>") {
                level flag::set("<dev string:x13b5>");
                level flag::set("<dev string:x13cb>");
                level flag::set("<dev string:x13e1>");
                level flag::set("<dev string:x13fc>");
                level flag::set("<dev string:x13a0>");
                level flag::set("<dev string:x1413>");
                level flag::set("<dev string:x142e>");
                level flag::set("<dev string:x144b>");
                level flag::set("<dev string:x1467>");
                setdvar("<dev string:x3e>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:xad>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1342>");
                setdvar("<dev string:xad>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:xc4>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1342>");
                level flag::set("<dev string:x13b5>");
                setdvar("<dev string:xc4>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:xdb>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1342>");
                level flag::set("<dev string:x13b5>");
                level flag::set("<dev string:x1413>");
                setdvar("<dev string:xdb>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:xf2>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1389>");
                setdvar("<dev string:xf2>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x10a>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1389>");
                level flag::set("<dev string:x13fc>");
                setdvar("<dev string:x10a>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x122>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1389>");
                level flag::set("<dev string:x13fc>");
                level flag::set("<dev string:x144b>");
                setdvar("<dev string:x122>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x13a>") == "<dev string:x112f>") {
                level flag::set("<dev string:x136e>");
                setdvar("<dev string:x13a>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x157>") == "<dev string:x112f>") {
                level flag::set("<dev string:x136e>");
                level flag::set("<dev string:x13e1>");
                setdvar("<dev string:x157>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x174>") == "<dev string:x112f>") {
                level flag::set("<dev string:x136e>");
                level flag::set("<dev string:x13e1>");
                level flag::set("<dev string:x1467>");
                setdvar("<dev string:x174>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x191>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1358>");
                setdvar("<dev string:x191>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x1aa>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1358>");
                level flag::set("<dev string:x13cb>");
                setdvar("<dev string:x1aa>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x1c3>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1358>");
                level flag::set("<dev string:x13cb>");
                level flag::set("<dev string:x142e>");
                setdvar("<dev string:x1c3>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x8e>") == "<dev string:x112f>") {
                level flag::set("<dev string:x1488>");
                setdvar("<dev string:x8e>", "<dev string:x3a>");
            }
            if (getdvarstring("<dev string:x50>") == "<dev string:x112f>") {
                zm_tomb_teleporter::function_b67726d8(1);
                zm_tomb_teleporter::function_b67726d8(2);
                zm_tomb_teleporter::function_b67726d8(3);
                zm_tomb_teleporter::function_b67726d8(4);
                setdvar("<dev string:x50>", "<dev string:x3a>");
                level flag::set("<dev string:x149c>");
            }
            wait 0.5;
        }
    }

#/

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0xe56d3e9f, Offset: 0x2e18
// Size: 0x36
function function_61fce955(var_abb52853) {
    switch (var_abb52853) {
    case 1:
        return "teleport_fire";
    case 4:
        return "teleport_ice";
    case 3:
        return "teleport_elec";
    case 2:
    default:
        return "teleport_air";
    }
}

/#

    // Namespace zm_tomb_utility
    // Params 0, eflags: 0x0
    // Checksum 0xccc294f6, Offset: 0x2e88
    // Size: 0x1a2
    function function_90960539() {
        while (getdvarstring("<dev string:x14b2>") != "<dev string:x112f>") {
            wait 0.1;
        }
        players = getplayers();
        foreach (player in players) {
            player zm_equipment::set_player_equipment("<dev string:x14c2>");
            player giveweapon("<dev string:x14c2>");
            player setweaponammoclip("<dev string:x14c2>", 1);
            player thread zm_equipment::show_hint("<dev string:x14c2>");
            player notify("<dev string:x14c2>" + "<dev string:x14d4>");
            player zm_equipment::set_equipment_invisibility_to_player("<dev string:x14c2>", 1);
            player setactionslot(1, "<dev string:x14db>", "<dev string:x14c2>");
        }
    }

#/

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0xedca92ae, Offset: 0x3038
// Size: 0x54
function function_2b260840(var_eca16733) {
    println("<dev string:x14e2>" + var_eca16733.name);
    zm_craftables::function_ac4e44a7(var_eca16733);
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xc9f248dc, Offset: 0x3098
// Size: 0x1a
function function_30b74486() {
    return self zm_craftables::function_30b74486();
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xab6ad5c4, Offset: 0x30c0
// Size: 0x2a
function function_ad26d97f(var_9967ff1, var_c122676d) {
    return zm_craftables::function_ad26d97f(var_9967ff1, var_c122676d);
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x8de399fb, Offset: 0x30f8
// Size: 0x2e
function function_dccaee59(var_9967ff1) {
    level waittill(var_9967ff1 + "_crafted", player);
    return player;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x2cd72f6c, Offset: 0x3130
// Size: 0x7c
function check_solo_status() {
    if (getnumexpectedplayers() == 1 && (getnumexpectedplayers() == 1 && zm_utility::is_solo_ranked_game() || !sessionmodeisonlinegame())) {
        level.is_forever_solo_game = 1;
        return;
    }
    level.is_forever_solo_game = 0;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x96a32454, Offset: 0x31b8
// Size: 0x2f8
function function_b8710279() {
    self endon(#"disconnect");
    var_6740bd9d = 0.35 / 10;
    var_73d7f182 = 0.25 / 6;
    var_19d9b011 = 1;
    var_224c23eb = 1;
    self.var_a0d51d60 = var_19d9b011;
    while (true) {
        var_262a5e46 = 0;
        self.var_262a5e46 = 0;
        foreach (area in level.var_97392b41) {
            if (self istouching(area)) {
                self clientfield::set_to_player("sndMudSlow", 1);
                self allowslide(0);
                var_262a5e46 = 1;
                self.var_262a5e46 = 1;
                if (!(isdefined(self.var_7892737f) && self.var_7892737f) && !(isdefined(self.dontspeak) && self.dontspeak)) {
                    self thread zm_tomb_vo::function_7c44fdd7();
                }
                if (self hasperk("specialty_staminup")) {
                    var_19d9b011 = 0.75;
                    var_224c23eb = var_73d7f182;
                } else {
                    var_19d9b011 = 0.65;
                    var_224c23eb = var_6740bd9d;
                }
                break;
            }
        }
        if (!var_262a5e46) {
            self clientfield::set_to_player("sndMudSlow", 0);
            self notify(#"hash_af080872");
            self allowslide(1);
            var_19d9b011 = 1;
        }
        if (self.var_a0d51d60 != var_19d9b011) {
            if (self.var_a0d51d60 > var_19d9b011 + var_224c23eb) {
                self.var_a0d51d60 -= var_224c23eb;
            } else {
                self.var_a0d51d60 = var_19d9b011;
            }
            self setmovespeedscale(self.var_a0d51d60);
        }
        wait 0.1;
    }
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x2854f82f, Offset: 0x34b8
// Size: 0x55e
function function_3b0e9b9(var_86a233b2) {
    if (!isdefined(var_86a233b2)) {
        var_86a233b2 = 0;
    }
    self.targetname = "zombie";
    self.script_noteworthy = undefined;
    if (!var_86a233b2) {
        self.animname = "zombie";
    }
    if (isdefined(zm_utility::get_gamemode_var("pre_init_zombie_spawn_func"))) {
        self [[ zm_utility::get_gamemode_var("pre_init_zombie_spawn_func") ]]();
    }
    self thread zm_spawner::play_ambient_zombie_vocals();
    self.zmb_vocals_attack = "zmb_vocals_zombie_attack";
    self.ignoreall = 1;
    self.ignoreme = 1;
    self.allowdeath = 1;
    self.force_gib = 1;
    self.is_zombie = 1;
    self.missinglegs = 0;
    self allowedstances("stand");
    self.zombie_damaged_by_bar_knockdown = 0;
    self.gibbed = 0;
    self.head_gibbed = 0;
    self setphysparams(15, 0, 72);
    self.disablearrivals = 1;
    self.disableexits = 1;
    self.grenadeawareness = 0;
    self.badplaceawareness = 0;
    self.ignoresuppression = 1;
    self.suppressionthreshold = 1;
    self.nododgemove = 1;
    self.dontshootwhilemoving = 1;
    self.pathenemylookahead = 0;
    self.badplaceawareness = 0;
    self.chatinitialized = 0;
    self.a.disablepain = 1;
    self zm_utility::disable_react();
    if (isdefined(level.zombie_health)) {
        self.maxhealth = level.zombie_health;
        if (isdefined(level.var_5a487977[self.archetype]) && level.var_5a487977[self.archetype].size > 0) {
            self.health = level.var_5a487977[self.archetype][0];
            arrayremovevalue(level.var_5a487977[self.archetype], level.var_5a487977[self.archetype][0]);
        } else {
            self.health = level.zombie_health;
        }
    } else {
        self.maxhealth = level.zombie_vars["zombie_health_start"];
        self.health = self.maxhealth;
    }
    self.freezegun_damage = 0;
    level thread zm_spawner::zombie_death_event(self);
    self zm_utility::init_zombie_run_cycle();
    self thread function_8d90d591();
    self thread zombie_utility::zombie_gib_on_damage();
    self thread zm_spawner::zombie_damage_failsafe();
    self thread zm_spawner::function_1612a0b8();
    if (isdefined(level._zombie_custom_spawn_logic)) {
        if (isarray(level._zombie_custom_spawn_logic)) {
            for (i = 0; i < level._zombie_custom_spawn_logic.size; i++) {
                self thread [[ level._zombie_custom_spawn_logic[i] ]]();
            }
        } else {
            self thread [[ level._zombie_custom_spawn_logic ]]();
        }
    }
    if (!isdefined(self.no_eye_glow) || !self.no_eye_glow) {
        if (!(isdefined(self.is_inert) && self.is_inert)) {
            self thread zombie_utility::delayed_zombie_eye_glow();
        }
    }
    self.deathfunction = &zm_spawner::zombie_death_animscript;
    self.flame_damage_time = 0;
    self.meleedamage = 60;
    self.no_powerups = 1;
    self zm_spawner::zombie_history("zombie_spawn_init -> Spawned = " + self.origin);
    self.thundergun_knockdown_func = level.basic_zombie_thundergun_knockdown;
    self.tesla_head_gib_func = &zm_spawner::zombie_tesla_head_gib;
    self.team = level.zombie_team;
    if (isdefined(zm_utility::get_gamemode_var("post_init_zombie_spawn_func"))) {
        self [[ zm_utility::get_gamemode_var("post_init_zombie_spawn_func") ]]();
    }
    if (isdefined(level.zombie_init_done)) {
        self [[ level.zombie_init_done ]]();
    }
    self.zombie_init_done = 1;
    self notify(#"zombie_init_done");
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x9fcd31d6, Offset: 0x3a20
// Size: 0x5c4
function function_8d90d591() {
    self endon(#"death");
    assert(!self.isdog);
    self.ai_state = "zombie_think";
    find_flesh_struct_string = undefined;
    self waittill(#"zombie_custom_think_done", find_flesh_struct_string);
    node = undefined;
    var_a7630bb3 = [];
    self.entrance_nodes = [];
    if (isdefined(level.var_815f3ea6)) {
        max_dist = level.var_815f3ea6;
    } else {
        max_dist = 500;
    }
    if (!isdefined(find_flesh_struct_string) && isdefined(self.target) && self.target != "") {
        desired_origin = zombie_utility::get_desired_origin();
        assert(isdefined(desired_origin), "<dev string:x14fd>" + self.origin + "<dev string:x1508>");
        origin = desired_origin;
        node = arraygetclosest(origin, level.exterior_goals);
        self.entrance_nodes[self.entrance_nodes.size] = node;
        self zm_spawner::zombie_history("zombie_think -> #1 entrance (script_forcegoal) origin = " + self.entrance_nodes[0].origin);
    } else if (self zm_spawner::should_skip_teardown(find_flesh_struct_string)) {
        self zm_spawner::zombie_setup_attack_properties();
        if (isdefined(self.target)) {
            var_61cc13fb = getnode(self.target, "targetname");
            if (isdefined(var_61cc13fb)) {
                self setgoalnode(var_61cc13fb);
                self waittill(#"goal");
            }
        }
        if (isdefined(self.start_inert) && self.start_inert) {
            self zm_spawner::zombie_complete_emerging_into_playable_area();
            return;
        }
        self thread function_d6a291a9();
        return;
    } else if (isdefined(find_flesh_struct_string)) {
        assert(isdefined(find_flesh_struct_string));
        for (i = 0; i < level.exterior_goals.size; i++) {
            if (level.exterior_goals[i].script_string == find_flesh_struct_string) {
                node = level.exterior_goals[i];
                break;
            }
        }
        self.entrance_nodes[self.entrance_nodes.size] = node;
        self zm_spawner::zombie_history("zombie_think -> #1 entrance origin = " + node.origin);
        self thread zm_spawner::zombie_assure_node();
    } else {
        origin = self.origin;
        desired_origin = zombie_utility::get_desired_origin();
        if (isdefined(desired_origin)) {
            origin = desired_origin;
        }
        nodes = util::get_array_of_closest(origin, level.exterior_goals, undefined, 3);
        var_a7630bb3[0] = nodes[0];
        prev_dist = distance(self.origin, nodes[0].origin);
        for (i = 1; i < nodes.size; i++) {
            dist = distance(self.origin, nodes[i].origin);
            if (dist - prev_dist > max_dist) {
                break;
            }
            prev_dist = dist;
            var_a7630bb3[i] = nodes[i];
        }
        node = var_a7630bb3[0];
        if (var_a7630bb3.size > 1) {
            node = var_a7630bb3[randomint(var_a7630bb3.size)];
        }
        self.entrance_nodes = var_a7630bb3;
        self zm_spawner::zombie_history("zombie_think -> #1 entrance origin = " + node.origin);
        self thread zm_spawner::zombie_assure_node();
    }
    assert(isdefined(node), "<dev string:x1531>");
    level thread zm_utility::draw_line_ent_to_pos(self, node.origin, "goal");
    self.first_node = node;
    self thread zm_spawner::zombie_goto_entrance(node);
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xa4f88784, Offset: 0x3ff0
// Size: 0xf6
function function_d6a291a9() {
    self endon(#"death");
    if (!isdefined(level.playable_areas)) {
        level.playable_areas = getentarray("player_volume", "script_noteworthy");
    }
    while (true) {
        foreach (area in level.playable_areas) {
            if (self istouching(area)) {
                self function_6849be1f();
                return;
            }
        }
        wait 1;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x68f439cc, Offset: 0x40f0
// Size: 0x44
function function_6849be1f() {
    self.completed_emerging_into_playable_area = 1;
    self notify(#"completed_emerging_into_playable_area");
    self.no_powerups = 1;
    self thread zm_spawner::function_60389561();
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xbd244430, Offset: 0x4140
// Size: 0x24c
function function_83fc6b30(spot, var_a4da442e) {
    if (!isdefined(var_a4da442e)) {
        var_a4da442e = &zm_spawner::zombie_rise_fx;
    }
    self endon(#"death");
    self.in_the_ground = 1;
    self.no_eye_glow = 1;
    if (!isdefined(spot.angles)) {
        spot.angles = (0, 0, 0);
    }
    target_org = zombie_utility::get_desired_origin();
    if (isdefined(target_org)) {
        spot.angles = vectortoangles(target_org - spot.origin);
    }
    level thread zombie_utility::zombie_rise_death(self, spot);
    spot thread [[ var_a4da442e ]](self);
    substate = 0;
    if (self.zombie_move_speed == "walk") {
        substate = randomint(2);
    } else if (self.zombie_move_speed == "run") {
        substate = 2;
    } else if (self.zombie_move_speed == "sprint") {
        substate = 3;
    }
    self playsound("zmb_vocals_capzomb_spawn");
    self function_f356818(spot);
    self notify(#"rise_anim_finished");
    spot notify(#"stop_zombie_rise_fx");
    self.in_the_ground = 0;
    self.no_eye_glow = 0;
    self thread zombie_utility::zombie_eye_glow();
    self notify(#"risen", spot.script_string);
    self.zombie_think_done = 1;
    self zm_spawner::zombie_complete_emerging_into_playable_area();
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0xa7280003, Offset: 0x4398
// Size: 0x6a
function function_f356818(spot) {
    self endon(#"death");
    self endon(#"hash_59e307f3");
    self thread function_4eb9088(2);
    spot scene::play("scene_zm_dlc5_zombie_traverse_ground_dugup", self);
    self notify(#"hash_59e307f3");
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x37aa8f06, Offset: 0x4410
// Size: 0x36
function function_4eb9088(timeout) {
    self endon(#"death");
    self endon(#"hash_59e307f3");
    wait timeout;
    self notify(#"hash_59e307f3");
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x4975966e, Offset: 0x4450
// Size: 0x2a
function function_9441e538(w_weapon) {
    switch (w_weapon.name) {
    case "staff_air_upgraded":
    case "staff_fire_upgraded":
    case "staff_lightning_upgraded":
    case "staff_water_upgraded":
        return true;
    default:
        return false;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x67f67e30, Offset: 0x44b8
// Size: 0x390
function function_56cd26ed() {
    self notify(#"hash_56cd26ed");
    self endon(#"hash_56cd26ed");
    self endon(#"disconnect");
    self clientfield::set_to_player("player_staff_charge", 0);
    while (true) {
        self waittill(#"weapon_change", weapon);
        var_ec030825 = 0;
        var_1a8ed636 = 0;
        var_9e3eac48 = function_9441e538(weapon);
        var_e6741eb9 = undefined;
        a_str_weapons = self getweaponslist();
        foreach (str_weapon in a_str_weapons) {
            if (function_9441e538(str_weapon)) {
                var_ec030825 = 1;
                var_e6741eb9 = str_weapon;
            }
            if (str_weapon.name == "staff_revive") {
                var_1a8ed636 = 1;
            }
        }
        /#
            if (var_ec030825 && !var_1a8ed636) {
                var_1a8ed636 = 1;
            }
        #/
        if (var_ec030825 && !var_1a8ed636) {
            self takeweapon(var_e6741eb9);
            var_ec030825 = 0;
        }
        if (!var_ec030825 && var_1a8ed636) {
            self takeweapon(getweapon("staff_revive"));
            var_1a8ed636 = 0;
        }
        if (!var_9e3eac48 && "none" != weapon.name && (!var_1a8ed636 || "none" != weapon.altweapon.name)) {
            self setactionslot(3, "altmode");
            self clientfield::set_player_uimodel("hudItems.showDpadLeft_Staff", 0);
            self clientfield::set_player_uimodel("hudItems.dpadLeftAmmo", 0);
            self notify(#"hash_75edd128");
        } else {
            self setactionslot(3, "weapon", getweapon("staff_revive"));
            self clientfield::set_player_uimodel("hudItems.showDpadLeft_Staff", 1);
            self thread function_38af9e8e();
        }
        if (var_9e3eac48) {
            self thread function_69405a9c(weapon);
        }
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x3afb7ae9, Offset: 0x4850
// Size: 0x98
function function_38af9e8e() {
    self notify(#"hash_38af9e8e");
    self endon(#"hash_38af9e8e");
    self endon(#"hash_75edd128");
    self endon(#"disconnect");
    while (true) {
        ammo = self getammocount(level.var_2b2f83e5);
        self clientfield::set_player_uimodel("hudItems.dpadLeftAmmo", ammo);
        wait 0.05;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x1bcf530e, Offset: 0x48f0
// Size: 0xbc
function function_c2305758() {
    self endon(#"disconnect");
    self endon(#"player_downed");
    self endon(#"weapon_change");
    self endon(#"weapon_fired");
    while (!self attackbuttonpressed()) {
        wait 0.05;
    }
    var_3321b2a6 = 0;
    while (true) {
        if (var_3321b2a6 != self.chargeshotlevel) {
            self clientfield::set_to_player("player_staff_charge", self.chargeshotlevel);
            var_3321b2a6 = self.chargeshotlevel;
        }
        wait 0.1;
    }
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x8990f836, Offset: 0x49b8
// Size: 0xc4
function function_69405a9c(weapon) {
    self notify(#"hash_69405a9c");
    self endon(#"hash_69405a9c");
    self endon(#"disconnect");
    self clientfield::set_to_player("player_staff_charge", 0);
    while (function_9441e538(weapon)) {
        self function_c2305758();
        self clientfield::set_to_player("player_staff_charge", 0);
        weapon = self getcurrentweapon();
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x2fdc93f4, Offset: 0x4a88
// Size: 0x5c
function function_87ed5da9() {
    hud = function_5d129ad2();
    hud settext(%ZM_TOMB_RU);
    wait 3;
    hud destroy();
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x975c8f17, Offset: 0x4af0
// Size: 0x8c
function function_85bdbb35() {
    level notify(#"staff_hint");
    hud = function_5d129ad2();
    hud settext(%ZM_TOMB_OSO);
    level util::waittill_any_timeout(3, "staff_hint");
    hud destroy();
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xfd998feb, Offset: 0x4b88
// Size: 0x5c
function function_837cc95f() {
    hud = function_5d129ad2();
    hud settext(%ZM_TOMB_GREL);
    wait 3;
    hud destroy();
}

/#

    // Namespace zm_tomb_utility
    // Params 5, eflags: 0x0
    // Checksum 0x64327085, Offset: 0x4bf0
    // Size: 0x146
    function function_5de0d079(var_e9f36a76, color, origin, str_dvar, var_f85a2ecd) {
        self endon(#"death");
        self endon(#"stop_debug_position");
        if (!isdefined(var_e9f36a76)) {
            var_e9f36a76 = "<dev string:x155f>";
        }
        if (!isdefined(color)) {
            color = (255, 255, 255);
        }
        if (isdefined(str_dvar)) {
            while (getdvarstring("<dev string:x65>") != "<dev string:x112f>") {
                wait 1;
            }
        }
        while (true) {
            if (isdefined(origin)) {
                var_7f409b8b = origin;
            } else {
                var_7f409b8b = self.origin;
            }
            print3d(var_7f409b8b, var_e9f36a76, color, 1);
            wait 0.1;
            if (isdefined(var_f85a2ecd)) {
                var_f85a2ecd -= 0.1;
                if (var_f85a2ecd <= 0) {
                    break;
                }
            }
        }
    }

#/

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x513b87a7, Offset: 0x4d40
// Size: 0x44
function function_e51043e1(var_60c1e5f7) {
    self endon(#"death");
    level flag::wait_till(var_60c1e5f7);
    self delete();
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xdc1ccf12, Offset: 0x4d90
// Size: 0x40
function function_f7140e8c() {
    self endon(#"death");
    while (true) {
        self rotateyaw(360, 10, 0, 0);
        wait 9.9;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x7accf5af, Offset: 0x4dd8
// Size: 0xf4
function function_5d129ad2() {
    client_hint = newclienthudelem(self);
    client_hint.alignx = "center";
    client_hint.aligny = "middle";
    client_hint.horzalign = "center";
    client_hint.vertalign = "bottom";
    client_hint.y = -120;
    client_hint.foreground = 1;
    client_hint.font = "default";
    client_hint.fontscale = 1.5;
    client_hint.alpha = 1;
    client_hint.color = (1, 1, 1);
    return client_hint;
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x380532dc, Offset: 0x4ed8
// Size: 0x142
function function_f2a1902a(var_cd7edcab) {
    a_players = getplayers();
    foreach (e_player in a_players) {
        n_player = e_player getentitynumber();
        if (!isdefined(self.stub.playertrigger[n_player])) {
            continue;
        }
        new_msg = self [[ var_cd7edcab ]](e_player);
        self.stub.playertrigger[n_player].var_9ff6b454 = new_msg;
        self.stub.playertrigger[n_player] sethintstring(new_msg);
    }
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x333d009c, Offset: 0x5028
// Size: 0x4c
function function_d73e42e0(str_message) {
    self.hint_string = str_message;
    zm_unitrigger::unregister_unitrigger(self);
    zm_unitrigger::register_unitrigger(self, &function_3db9b69);
}

// Namespace zm_tomb_utility
// Params 5, eflags: 0x0
// Checksum 0xff19ab6a, Offset: 0x5080
// Size: 0x148
function function_52854313(origin, radius, use_trigger, var_3fe858d9, func_visibility) {
    if (!isdefined(use_trigger)) {
        use_trigger = 0;
    }
    trigger_stub = spawnstruct();
    trigger_stub.origin = origin;
    trigger_stub.radius = radius;
    if (use_trigger) {
        trigger_stub.cursor_hint = "HINT_NOICON";
        trigger_stub.script_unitrigger_type = "unitrigger_radius_use";
    } else {
        trigger_stub.script_unitrigger_type = "unitrigger_radius";
    }
    if (isdefined(var_3fe858d9)) {
        trigger_stub.var_266e4883 = var_3fe858d9;
        zm_unitrigger::unitrigger_force_per_player_triggers(trigger_stub, 1);
    }
    if (isdefined(func_visibility)) {
        trigger_stub.prompt_and_visibility_func = func_visibility;
    }
    zm_unitrigger::register_unitrigger(trigger_stub, &function_3db9b69);
    return trigger_stub;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x65ba8ba1, Offset: 0x51d0
// Size: 0x88
function function_3db9b69() {
    self endon(#"kill_trigger");
    if (isdefined(self.stub.var_266e4883)) {
        self thread function_f2a1902a(self.stub.var_266e4883);
    }
    while (true) {
        self waittill(#"trigger", player);
        self.stub notify(#"trigger", player);
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x1685db52, Offset: 0x5260
// Size: 0x1c
function function_bd611266() {
    zm_unitrigger::unregister_unitrigger(self);
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x42fcb0ab, Offset: 0x5288
// Size: 0xac
function function_8a97fd20() {
    if (!isdefined(self)) {
        return;
    }
    if (isdefined(self.is_mechz) && self.is_mechz) {
        return;
    }
    var_8c74d8bb = [];
    var_8c74d8bb[0] = level._zombie_gib_piece_index_all;
    self gib("normal", var_8c74d8bb);
    self ghost();
    wait 0.4;
    if (isdefined(self)) {
        self delete();
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x3acbefa1, Offset: 0x5340
// Size: 0x12c
function function_cc964a18() {
    if (!isdefined(self)) {
        return;
    }
    if (isdefined(self.is_mechz) && self.is_mechz) {
        return;
    }
    v_origin = self gettagorigin("J_SpineLower");
    if (isdefined(v_origin)) {
        v_forward = anglestoforward((0, randomint(360), 0));
        playfx(level._effect["zombie_guts_explosion"], v_origin, v_forward);
    }
    util::wait_network_frame();
    if (isdefined(self)) {
        self ghost();
        wait randomfloatrange(0.4, 1.1);
        if (isdefined(self)) {
            self delete();
        }
    }
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x33755f6e, Offset: 0x5478
// Size: 0x84
function function_4256cdf(var_1efde1e7, var_acf672ac) {
    if (!nodesarelinked(var_1efde1e7, var_acf672ac)) {
        zm_utility::function_5bf9797b(var_1efde1e7, var_acf672ac);
    }
    if (!nodesarelinked(var_acf672ac, var_1efde1e7)) {
        zm_utility::function_5bf9797b(var_acf672ac, var_1efde1e7);
    }
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xf4787734, Offset: 0x5508
// Size: 0x84
function function_40ca640c(var_1efde1e7, var_acf672ac) {
    if (nodesarelinked(var_1efde1e7, var_acf672ac)) {
        zm_utility::function_596687a6(var_1efde1e7, var_acf672ac);
    }
    if (nodesarelinked(var_acf672ac, var_1efde1e7)) {
        zm_utility::function_596687a6(var_acf672ac, var_1efde1e7);
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x663c1168, Offset: 0x5598
// Size: 0x186
function function_ab2adcaa() {
    level.var_c95eeed7 = 0;
    level.var_aa00c190 = 0;
    level.var_16d8620e = 0;
    level.var_43f919c6 = 0;
    level thread function_ff41015b();
    level thread function_fdf9dab3();
    callback::on_connect(&function_c6592f0e);
    level.var_eb51cf7b = [];
    level.var_eb51cf7b[1] = "none";
    if (math::cointoss()) {
        level.var_eb51cf7b[3] = "snow";
    } else {
        level.var_eb51cf7b[4] = "snow";
    }
    for (i = 5; i <= 9; i++) {
        if (math::cointoss()) {
            level.var_eb51cf7b[i] = "none";
            continue;
        }
        level.var_eb51cf7b[i] = "rain";
    }
    level.var_eb51cf7b[10] = "snow";
    level notify(#"hash_149fa2ac");
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x9886e581, Offset: 0x5728
// Size: 0x1e0
function function_7d685c3() {
    var_6add606b = level.var_eb51cf7b[level.round_number];
    if (!isdefined(var_6add606b)) {
        var_945c45a5 = randomint(100);
        var_c1b3fd9 = level.round_number - level.var_5d843b44;
        var_d78ab732 = level.round_number - level.var_c9b37d3b;
        if (var_945c45a5 < 40 || var_c1b3fd9 > 3) {
            var_6add606b = "snow";
        } else if (var_945c45a5 < 80 || var_d78ab732 > 4) {
            var_6add606b = "rain";
        } else {
            var_6add606b = "none";
        }
    }
    if (var_6add606b == "snow") {
        level.var_c95eeed7 = randomintrange(1, 5);
        level.var_aa00c190 = 0;
        level.var_43f919c6 = 2;
        level.var_5d843b44 = level.round_number;
        return;
    }
    if (var_6add606b == "rain") {
        level.var_c95eeed7 = 0;
        level.var_aa00c190 = randomintrange(1, 5);
        level.var_43f919c6 = 1;
        level.var_c9b37d3b = level.round_number;
        return;
    }
    level.var_c95eeed7 = 0;
    level.var_aa00c190 = 0;
    level.var_43f919c6 = 3;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x660d8a09, Offset: 0x5910
// Size: 0x15c
function function_ff41015b() {
    level.var_5d843b44 = 0;
    level.var_c9b37d3b = 0;
    level waittill(#"hash_149fa2ac");
    while (true) {
        function_7d685c3();
        level clientfield::set("rain_level", level.var_aa00c190);
        level clientfield::set("snow_level", level.var_c95eeed7);
        wait 2;
        foreach (player in getplayers()) {
            if (zombie_utility::is_player_valid(player, 0, 1)) {
                player function_c6592f0e();
            }
        }
        level waittill(#"end_of_round");
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xf8c4e0b7, Offset: 0x5a78
// Size: 0xae
function function_c6592f0e() {
    self clientfield::set_to_player("player_weather_visionset", level.var_43f919c6);
    switch (level.var_43f919c6) {
    case 3:
        level util::set_lighting_state(0);
        break;
    case 1:
        level util::set_lighting_state(0);
        break;
    case 2:
        level util::set_lighting_state(1);
        break;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x61b9f14e, Offset: 0x5b30
// Size: 0x80
function function_fdf9dab3() {
    level.var_9a587ba1 = 360;
    while (true) {
        level.var_9a587ba1 -= 0;
        if (level.var_9a587ba1 < 0) {
            level.var_9a587ba1 += 360;
        }
        setdvar("r_skyRotation", level.var_9a587ba1);
        wait 0.1;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x99ec1590, Offset: 0x5bb8
// Size: 0x4
function function_95f226b8() {
    
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x760bd61d, Offset: 0x5bc8
// Size: 0x90
function function_9b31d651(var_a8a5285c) {
    dist = distance(self.origin, var_a8a5285c);
    if (dist == 0) {
        return;
    }
    movetime = dist / 300;
    self moveto(var_a8a5285c, movetime, 0, 0);
    self waittill(#"movedone");
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x140f6dba, Offset: 0x5c60
// Size: 0x98
function function_7ac77501(s_start) {
    for (s_next_pos = s_start; isdefined(s_next_pos); s_next_pos = undefined) {
        self function_9b31d651(s_next_pos.origin);
        if (isdefined(s_next_pos.target)) {
            s_next_pos = struct::get(s_next_pos.target, "targetname");
            continue;
        }
    }
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x2205778e, Offset: 0x5d00
// Size: 0x1d2
function function_cd40ebb0(s_start, var_b5f6f4e4) {
    a_path = [];
    for (s_next = s_start; isdefined(s_next); s_next = undefined) {
        a_path[a_path.size] = s_next;
        if (isdefined(s_next.target)) {
            s_next = struct::get(s_next.target, "targetname");
            continue;
        }
    }
    v_start = a_path[a_path.size - 1].origin + (0, 0, 1000);
    e_model = spawn("script_model", v_start);
    e_model setmodel(s_start.model);
    e_model clientfield::set("element_glow_fx", var_b5f6f4e4);
    playfxontag(level._effect["puzzle_orb_trail"], e_model, "tag_origin");
    for (i = a_path.size - 1; i >= 0; i--) {
        e_model function_9b31d651(a_path[i].origin);
    }
    return e_model;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x48f4cff5, Offset: 0x5ee0
// Size: 0x204
function function_159aac02() {
    level notify(#"hash_607fb6b3");
    level endon(#"hash_607fb6b3");
    var_a5d579d7 = struct::get("crypt_pillar", "targetname");
    exploder::exploder("fxexp_333");
    level thread exploder::stop_after_duration("fxexp_333", 28.5);
    if (isdefined(var_a5d579d7.e_model)) {
        var_a5d579d7.e_model delete();
    }
    var_a5d579d7.e_model = spawn("script_model", var_a5d579d7.origin);
    var_a5d579d7.e_model endon(#"death");
    var_a5d579d7.e_model ghost();
    var_a5d579d7.e_model setmodel("fxuse_sky_pillar_new");
    var_a5d579d7.e_model clientfield::set("sky_pillar", 1);
    util::wait_network_frame();
    var_a5d579d7.e_model show();
    wait 1;
    wait 27.5;
    var_a5d579d7.e_model clientfield::set("sky_pillar", 0);
    wait 1;
    var_a5d579d7.e_model delete();
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x90265519, Offset: 0x60f0
// Size: 0x184
function function_7340f39f(var_8aacdc6c, var_5dc37d2c) {
    players = getplayers();
    foreach (player in players) {
        dist_sq = distance2dsquared(player.origin, self.origin);
        if (dist_sq < var_5dc37d2c) {
            var_dba9b08d = anglestoforward(player.angles);
            to_self = self.origin - player.origin;
            to_self = vectornormalize(to_self);
            var_bd1b1333 = vectordot(to_self, var_dba9b08d);
            if (var_bd1b1333 > var_8aacdc6c) {
                return true;
            }
        }
    }
    return false;
}

// Namespace zm_tomb_utility
// Params 3, eflags: 0x0
// Checksum 0x34097c5, Offset: 0x6280
// Size: 0x72
function function_48f494c9(str_zone, var_8aacdc6c, var_5dc37d2c) {
    if (!level.zones[str_zone].is_occupied || level flag::get("chamber_puzzle_cheat")) {
        return 1;
    }
    return function_7340f39f(var_8aacdc6c, var_5dc37d2c);
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xac22ef58, Offset: 0x6300
// Size: 0x660
function function_bfec48b1(var_ce4610fc, var_41685025) {
    var_f1d31861 = strtok(var_41685025.script_flag, " ");
    assert(var_f1d31861.size == 2);
    foreach (str_flag in var_f1d31861) {
        assert(level flag::exists(str_flag));
    }
    level flag::wait_till(var_f1d31861[0]);
    s_start = struct::get(var_ce4610fc, "targetname");
    e_model = spawn("script_model", s_start.origin);
    e_model setmodel(s_start.model);
    e_model.script_int = var_41685025.script_int;
    util::wait_network_frame();
    e_model playsound("zmb_squest_crystal_leave");
    util::wait_network_frame();
    e_model playloopsound("zmb_squest_crystal_loop", 1);
    str_zone = zm_zonemgr::get_zone_from_position(s_start.origin, 1);
    var_c165db56 = 0;
    var_8aacdc6c = cos(30);
    var_5dc37d2c = 32400;
    while (var_c165db56 < 1) {
        wait 0.1;
        if (s_start function_48f494c9(str_zone, var_8aacdc6c, var_5dc37d2c)) {
            var_c165db56 += 0.1;
            continue;
        }
        var_c165db56 = 0;
    }
    util::wait_network_frame();
    playfxontag(level._effect["puzzle_orb_trail"], e_model, "tag_origin");
    util::wait_network_frame();
    s_next_pos = struct::get(s_start.target, "targetname");
    e_model function_7ac77501(s_next_pos);
    var_5ee31840 = e_model.origin;
    var_5ee31840 = (var_5ee31840[0], var_5ee31840[1], var_5ee31840[2] + 1000);
    e_model function_9b31d651(var_5ee31840);
    e_model ghost();
    var_8df19276 = struct::get("orb_crypt_descent_path", "targetname");
    var_5d6414fc = var_8df19276.origin + (0, 0, 3000);
    e_model moveto(var_5d6414fc, 0.05, 0, 0);
    e_model waittill(#"movedone");
    level flag::wait_till(var_f1d31861[1]);
    e_model show();
    level thread function_159aac02();
    e_model function_7ac77501(var_8df19276);
    level flag::set("disc_rotation_active");
    e_model function_9b31d651(var_41685025.origin);
    var_1cae8aa4 = spawn("script_model", e_model.origin);
    var_1cae8aa4 setmodel(e_model.model);
    var_1cae8aa4.script_int = var_41685025.script_int;
    e_model delete();
    util::wait_network_frame();
    var_1cae8aa4 playsound("zmb_squest_crystal_arrive");
    util::wait_network_frame();
    var_1cae8aa4 playloopsound("zmb_squest_crystal_loop", 1);
    level flag::clear("disc_rotation_active");
    return var_1cae8aa4;
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x7d7e225a, Offset: 0x6968
// Size: 0x4ca
function function_758db58b(var_86a233b2) {
    if (!isdefined(var_86a233b2)) {
        var_86a233b2 = 0;
    }
    self.targetname = "capture_zombie_ai";
    if (!var_86a233b2) {
        self.animname = "zombie";
    }
    self.sndname = "capzomb";
    if (isdefined(zm_utility::get_gamemode_var("pre_init_zombie_spawn_func"))) {
        self [[ zm_utility::get_gamemode_var("pre_init_zombie_spawn_func") ]]();
    }
    self thread zm_spawner::play_ambient_zombie_vocals();
    self.zmb_vocals_attack = "zmb_vocals_capzomb_attack";
    self.no_damage_points = 1;
    self.deathpoints_already_given = 1;
    self.ignore_enemy_count = 1;
    self.ignoreall = 1;
    self.ignoreme = 1;
    self.allowdeath = 1;
    self.force_gib = 1;
    self.is_zombie = 1;
    self.missinglegs = 0;
    self allowedstances("stand");
    self.zombie_damaged_by_bar_knockdown = 0;
    self.gibbed = 0;
    self.head_gibbed = 0;
    self.disablearrivals = 1;
    self.disableexits = 1;
    self.grenadeawareness = 0;
    self.badplaceawareness = 0;
    self.ignoresuppression = 1;
    self.suppressionthreshold = 1;
    self.nododgemove = 1;
    self.dontshootwhilemoving = 1;
    self.pathenemylookahead = 0;
    self.badplaceawareness = 0;
    self.chatinitialized = 0;
    self.a.disablepain = 1;
    self zm_utility::disable_react();
    if (isdefined(level.zombie_health)) {
        self.maxhealth = level.zombie_health;
        if (isdefined(level.var_5a487977[self.archetype]) && level.var_5a487977[self.archetype].size > 0) {
            self.health = level.var_5a487977[self.archetype][0];
            arrayremovevalue(level.var_5a487977[self.archetype], level.var_5a487977[self.archetype][0]);
        } else {
            self.health = level.zombie_health;
        }
    } else {
        self.maxhealth = level.zombie_vars["zombie_health_start"];
        self.health = self.maxhealth;
    }
    self.freezegun_damage = 0;
    level thread zm_spawner::zombie_death_event(self);
    self zombie_utility::set_zombie_run_cycle();
    self thread function_8d90d591();
    self thread zombie_utility::zombie_gib_on_damage();
    self thread zm_spawner::zombie_damage_failsafe();
    self thread zm_spawner::function_1612a0b8();
    if (!isdefined(self.no_eye_glow) || !self.no_eye_glow) {
        if (!(isdefined(self.is_inert) && self.is_inert)) {
            self thread zombie_utility::delayed_zombie_eye_glow();
        }
    }
    self.deathfunction = &zm_spawner::zombie_death_animscript;
    self.flame_damage_time = 0;
    self.meleedamage = 60;
    self.no_powerups = 1;
    self zm_spawner::zombie_history("zombie_spawn_init -> Spawned = " + self.origin);
    self.thundergun_knockdown_func = level.basic_zombie_thundergun_knockdown;
    self.tesla_head_gib_func = &zm_spawner::zombie_tesla_head_gib;
    self.team = level.zombie_team;
    if (isdefined(zm_utility::get_gamemode_var("post_init_zombie_spawn_func"))) {
        self [[ zm_utility::get_gamemode_var("post_init_zombie_spawn_func") ]]();
    }
    self.zombie_init_done = 1;
    self notify(#"zombie_init_done");
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x2fe763c7, Offset: 0x6e40
// Size: 0x1a2
function function_d0dc88b2(var_1a79f1e9, var_628919) {
    if (!isdefined(var_628919)) {
        var_628919 = 0.1;
    }
    a_players = getplayers();
    var_8bd151a9 = [];
    foreach (e_player in a_players) {
        if (zm_tomb_chamber::function_34b281af(e_player.origin)) {
            e_player clientfield::set_to_player("player_rumble_and_shake", var_1a79f1e9);
            var_8bd151a9[var_8bd151a9.size] = e_player;
        }
    }
    wait var_628919;
    foreach (e_player in var_8bd151a9) {
        e_player clientfield::set_to_player("player_rumble_and_shake", 0);
    }
}

// Namespace zm_tomb_utility
// Params 3, eflags: 0x0
// Checksum 0x750455ff, Offset: 0x6ff0
// Size: 0x1c2
function rumble_nearby_players(v_center, n_range, var_1a79f1e9) {
    n_range_sq = n_range * n_range;
    a_players = getplayers();
    var_8bd151a9 = [];
    foreach (e_player in a_players) {
        if (distancesquared(v_center, e_player.origin) < n_range_sq) {
            e_player clientfield::set_to_player("player_rumble_and_shake", var_1a79f1e9);
            var_8bd151a9[var_8bd151a9.size] = e_player;
        }
    }
    util::wait_network_frame();
    foreach (e_player in var_8bd151a9) {
        e_player clientfield::set_to_player("player_rumble_and_shake", 0);
    }
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x5ef27798, Offset: 0x71c0
// Size: 0x200
function function_1f0a611d(var_5c96fe71, var_5c2bcb80) {
    if (isdefined(self.var_8b5b43ed) && self.var_8b5b43ed) {
        return;
    }
    self.var_8b5b43ed = 1;
    var_6bd691d0 = 1;
    self clientfield::set_to_player("player_rumble_and_shake", 4);
    dist_sq = distancesquared(self.origin, var_5c96fe71.origin);
    var_172bfe84 = 10000;
    range_sq = 90000;
    while (dist_sq < range_sq) {
        wait 0.05;
        if (!isdefined(var_5c96fe71)) {
            break;
        }
        if (isdefined(var_5c2bcb80)) {
            if (!level flag::get(var_5c2bcb80)) {
                break;
            }
        }
        dist_sq = distancesquared(self.origin, var_5c96fe71.origin);
        if (var_6bd691d0 == 1 && dist_sq < var_172bfe84) {
            var_6bd691d0 = 2;
            self clientfield::set_to_player("player_rumble_and_shake", 5);
            continue;
        }
        if (var_6bd691d0 == 2 && dist_sq >= var_172bfe84) {
            var_6bd691d0 = 1;
            self clientfield::set_to_player("player_rumble_and_shake", 4);
        }
    }
    self clientfield::set_to_player("player_rumble_and_shake", 0);
    self.var_8b5b43ed = 0;
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x7b6ffc1f, Offset: 0x73c8
// Size: 0x148
function function_8b1b140c(var_5c2bcb80) {
    range_sq = 90000;
    while (isdefined(self) && level flag::get(var_5c2bcb80)) {
        a_players = getplayers();
        foreach (player in a_players) {
            dist_sq = distancesquared(self.origin, player.origin);
            if (dist_sq < range_sq) {
                player thread function_1f0a611d(self, var_5c2bcb80);
            }
        }
        util::wait_network_frame();
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xf82ff272, Offset: 0x7518
// Size: 0x54
function function_5a9d2dde() {
    var_547a4d96 = getentarray("bunker_door", "script_noteworthy");
    array::thread_all(var_547a4d96, &function_89e4183d);
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x52ce0a7, Offset: 0x7578
// Size: 0x24
function function_89e4183d() {
    self waittill(#"movedone");
    self delete();
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xd1c02de5, Offset: 0x75a8
// Size: 0xbc
function adjustments_for_solo() {
    if (isdefined(level.is_forever_solo_game) && level.is_forever_solo_game) {
        a_door_buys = getentarray("zombie_door", "targetname");
        array::thread_all(a_door_buys, &door_price_reduction_for_solo);
        a_debris_buys = getentarray("zombie_debris", "targetname");
        array::thread_all(a_debris_buys, &door_price_reduction_for_solo);
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x88da9cd6, Offset: 0x7670
// Size: 0xbc
function door_price_reduction_for_solo() {
    if (self.zombie_cost >= 750) {
        self.zombie_cost -= -6;
        if (self.zombie_cost >= 2500) {
            self.zombie_cost -= -6;
        }
        if (self.targetname == "zombie_door") {
            self zm_utility::set_hint_string(self, "default_buy_door", self.zombie_cost);
            return;
        }
        self zm_utility::set_hint_string(self, "default_buy_debris", self.zombie_cost);
    }
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xaaeee198, Offset: 0x7738
// Size: 0x7c
function function_dea8ad10(str_weapon, n_cost) {
    level.zombie_weapons[str_weapon].cost = n_cost;
    level.zombie_weapons[str_weapon].ammo_cost = zm_utility::round_up_to_ten(int(n_cost * 0.5));
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x20ffdddb, Offset: 0x77c0
// Size: 0x1ee
function function_20c78add() {
    while (true) {
        level flag::wait_till("zone_capture_in_progress");
        level flag::wait_till_clear("zone_capture_in_progress");
        wait 2;
        foreach (generator in level.zone_capture.zones) {
            if (generator flag::get("player_controlled")) {
                foreach (var_1af28ab3 in level.var_b578830d) {
                    if (var_1af28ab3.str_location == "start_bunker") {
                        if (level.players.size == 1) {
                            level thread zm_challenges_tomb::function_139222f7(undefined, var_1af28ab3, &zm_tomb_challenges::function_51587ba7, -1);
                            return;
                        }
                        level thread zm_challenges_tomb::function_139222f7(undefined, var_1af28ab3, &zm_tomb_challenges::function_2bd3ec4f, -1);
                        return;
                    }
                }
            }
        }
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xd05283a0, Offset: 0x79b8
// Size: 0xc4
function traversal_blocker() {
    level flag::init("player_near_traversal");
    var_876dc212 = getent("traversal_blocker", "targetname");
    var_876dc212 thread function_76bfd1c3();
    level flag::wait_till_any(array("activate_zone_nml", "player_near_traversal"));
    var_876dc212 connectpaths();
    var_876dc212 delete();
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x1624759b, Offset: 0x7a88
// Size: 0x184
function function_76bfd1c3() {
    self endon(#"death");
    pos1 = (-1509, 3912, -168);
    pos2 = (672, 3720, -179);
    var_de42e29f = 0;
    while (level.round_number < 10 && !var_de42e29f) {
        a_players = getplayers();
        foreach (player in a_players) {
            if (distancesquared(player.origin, pos1) < 4096 || distancesquared(player.origin, pos2) < 4096) {
                var_de42e29f = 1;
            }
        }
        wait 1;
    }
    level flag::set("player_near_traversal");
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0x9a865b86, Offset: 0x7c18
// Size: 0x84
function function_f0759766(e_attacker, str_weapon) {
    if (!isdefined(self)) {
        return;
    }
    if (!isalive(self)) {
        return;
    }
    self.staff_dmg = str_weapon;
    self dodamage(self.health, self.origin, e_attacker, e_attacker, "none", self.var_c5a77b9b, 0, str_weapon);
}

// Namespace zm_tomb_utility
// Params 3, eflags: 0x0
// Checksum 0xb5a7433a, Offset: 0x7ca8
// Size: 0x7c
function function_ad22cd8f(e_attacker, str_weapon, var_c776f4) {
    if (!isdefined(self)) {
        return;
    }
    if (!isalive(self)) {
        return;
    }
    self dodamage(var_c776f4, self.origin, e_attacker, e_attacker, "none", self.var_c5a77b9b, 0, str_weapon);
}

// Namespace zm_tomb_utility
// Params 4, eflags: 0x0
// Checksum 0xf41bf7ac, Offset: 0x7d30
// Size: 0x184
function function_2f31684b(e_attacker, n_amount, w_damage, str_mod) {
    if (isstring(w_damage)) {
        w_damage = getweapon(w_damage);
    }
    if (isdefined(self.is_mechz) && self.is_mechz) {
        self dodamage(n_amount, self.origin, e_attacker, e_attacker, "none", str_mod, 0, w_damage);
        return;
    }
    if (n_amount < self.health) {
        self.var_c5a77b9b = str_mod;
        zm_net::network_safe_init("dodamage", 6);
        self zm_net::network_choke_action("dodamage", &function_ad22cd8f, e_attacker, w_damage, n_amount);
        return;
    }
    self.var_c5a77b9b = str_mod;
    zm_net::network_safe_init("dodamage_kill", 4);
    self zm_net::network_choke_action("dodamage_kill", &function_f0759766, e_attacker, w_damage);
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xaa8d93aa, Offset: 0x7ec0
// Size: 0x2c
function _throttle_bullet_trace_think() {
    do {
        level.bullet_traces_this_frame = 0;
        util::wait_network_frame();
    } while (true);
}

// Namespace zm_tomb_utility
// Params 3, eflags: 0x0
// Checksum 0x1bbf971c, Offset: 0x7ef8
// Size: 0x92
function bullet_trace_throttled(v_start, v_end, e_ignore) {
    if (!isdefined(level.bullet_traces_this_frame)) {
        level thread _throttle_bullet_trace_think();
    }
    while (level.bullet_traces_this_frame >= 2) {
        util::wait_network_frame();
    }
    level.bullet_traces_this_frame++;
    return bullettracepassed(v_start, v_end, 0, e_ignore);
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x6b987b3a, Offset: 0x7f98
// Size: 0x100
function function_d39fc97a(player) {
    if (isdefined(player.b_teleporting) && player.b_teleporting) {
        return false;
    }
    var_de0d565a = 0;
    var_561c025d = 0;
    if (isdefined(player.zone_name)) {
        if (issubstr(player.zone_name, "zone_chamber")) {
            var_de0d565a = 1;
        }
    }
    if (isdefined(self.zone_name)) {
        if (issubstr(self.zone_name, "zone_chamber")) {
            var_561c025d = 1;
        }
    }
    if (var_de0d565a && !var_561c025d) {
        return false;
    }
    if (!var_de0d565a && var_561c025d) {
        return false;
    }
    return true;
}

// Namespace zm_tomb_utility
// Params 2, eflags: 0x0
// Checksum 0xc3fd7af1, Offset: 0x80a0
// Size: 0x308
function function_e046126e(origin, players) {
    var_1d2e463e = 9999999;
    var_d29b3eaa = 9999999;
    var_9b31173 = undefined;
    var_8446333e = undefined;
    for (i = 0; i < players.size; i++) {
        player = players[i];
        if (!isdefined(player)) {
            continue;
        }
        if (isdefined(player.var_d9cb04f7) && player.var_d9cb04f7) {
            if (isdefined(self.var_326bf116) && self.var_326bf116) {
                continue;
            } else if (!isdefined(var_8446333e)) {
                var_2f4eb1e1 = self zm_tomb_tank::function_23ff23ec();
                var_8446333e = var_2f4eb1e1;
            } else {
                var_2f4eb1e1 = var_8446333e;
            }
        } else {
            if (isdefined(self.var_326bf116) && self.var_326bf116) {
                continue;
            }
            if (self function_d39fc97a(player)) {
                var_2f4eb1e1 = self zm_utility::approximate_path_dist(player);
            } else {
                var_2f4eb1e1 = undefined;
            }
        }
        if (!isdefined(var_2f4eb1e1)) {
            continue;
        }
        if (isdefined(level.validate_enemy_path_length)) {
            if (var_2f4eb1e1 == 0) {
                valid = self thread [[ level.validate_enemy_path_length ]](player);
                if (!valid) {
                    continue;
                }
            }
        }
        if (var_2f4eb1e1 < var_1d2e463e) {
            var_1d2e463e = var_2f4eb1e1;
            var_9b31173 = player;
            var_d29b3eaa = distance2dsquared(self.origin, player.origin);
            continue;
        }
        if (var_2f4eb1e1 == var_1d2e463e && var_2f4eb1e1 <= 5) {
            var_e2f54060 = distance2dsquared(self.origin, player.origin);
            if (var_e2f54060 < var_d29b3eaa) {
                var_1d2e463e = var_2f4eb1e1;
                var_9b31173 = player;
                var_d29b3eaa = var_e2f54060;
            }
        }
    }
    if (players.size > 1 && isdefined(var_9b31173)) {
        if (!(isdefined(var_9b31173.var_d9cb04f7) && var_9b31173.var_d9cb04f7)) {
            self zm_utility::approximate_path_dist(var_9b31173);
        }
    }
    return var_9b31173;
}

// Namespace zm_tomb_utility
// Params 1, eflags: 0x0
// Checksum 0x558873c, Offset: 0x83b0
// Size: 0x46c
function function_84442246(var_6c0518cd) {
    /#
        if (!isdefined(var_6c0518cd)) {
            var_6c0518cd = 0;
            str_weapon = self getcurrentweapon();
            if (function_9441e538(str_weapon)) {
                s_info = zm_tomb_craftables::function_9b485a9(str_weapon);
                if (isdefined(s_info)) {
                    var_6c0518cd = s_info.enum;
                    s_info.var_43f3f5e5.is_charged = 1;
                }
            }
        }
    #/
    if (!(isdefined(self.one_inch_punch_flag_has_been_init) && self.one_inch_punch_flag_has_been_init) && !self hasperk("specialty_widowswine")) {
        cur_weapon = self zm_utility::get_player_melee_weapon();
        var_d5fbf885 = getweapon("knife");
        self.var_27eb897c = 0;
        if (var_6c0518cd != 0) {
            var_abcf76c0 = zm_tomb_craftables::function_9cc411fa(var_6c0518cd);
            if (var_abcf76c0.var_43f3f5e5.is_charged) {
                var_abcf76c0 = var_abcf76c0.upgrade;
            }
            if (isdefined(var_abcf76c0.w_melee)) {
                var_d5fbf885 = var_abcf76c0.w_melee;
                self.var_27eb897c = 1;
            }
        }
        var_b2d40d1a = 0;
        if (cur_weapon != var_d5fbf885) {
            self takeweapon(cur_weapon);
            self giveweapon(var_d5fbf885);
            self zm_utility::set_player_melee_weapon(var_d5fbf885);
            var_b2d40d1a = 1;
        }
    }
    var_d5b760b9 = self hasweapon(level.var_2b2f83e5);
    var_ec030825 = 0;
    a_weapons = self getweaponslistprimaries();
    var_abcf76c0 = zm_tomb_craftables::function_9cc411fa(var_6c0518cd);
    foreach (str_weapon in a_weapons) {
        if (function_9441e538(str_weapon)) {
            var_ec030825 = 1;
        }
    }
    if (var_d5b760b9 && !var_ec030825) {
        self setactionslot(3, "altmode");
        self takeweapon(level.var_2b2f83e5);
        return;
    }
    if (!var_d5b760b9 && var_ec030825) {
        self setactionslot(3, "weapon", level.var_2b2f83e5);
        self giveweapon(level.var_2b2f83e5);
        if (isdefined(var_abcf76c0)) {
            if (isdefined(var_abcf76c0.upgrade.var_ac4510c)) {
                self setweaponammostock(level.var_2b2f83e5, var_abcf76c0.upgrade.var_ac4510c);
                self setweaponammoclip(level.var_2b2f83e5, var_abcf76c0.upgrade.var_45c5f54c);
            }
        }
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0xb58a33e4, Offset: 0x8828
// Size: 0x4c
function function_a4919cb9() {
    if (isdefined(level.var_aeff2af8)) {
        a_enemies = [[ level.var_aeff2af8 ]]();
    } else {
        a_enemies = zombie_utility::get_round_enemy_array();
    }
    return a_enemies;
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x909f2bee, Offset: 0x8880
// Size: 0x2c
function function_818a139e() {
    level.var_f2eb9c0d++;
    wait 1;
    if (level.var_f2eb9c0d > 0) {
        level.var_f2eb9c0d--;
    }
}

// Namespace zm_tomb_utility
// Params 0, eflags: 0x0
// Checksum 0x1f07ac8c, Offset: 0x88b8
// Size: 0x30
function function_f25ae454() {
    if (level.var_f2eb9c0d >= 4) {
        return false;
    }
    level thread function_818a139e();
    return true;
}

